---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "beget_s3_bucket Resource - Beget"
description: |-
  S3 bucket resource. Creates and manages S3 storage buckets with configurable CORS, domain, and access settings.
---

# beget_s3_bucket (Resource)

S3 bucket resource. Creates and manages S3 storage buckets with configurable CORS, domain, and access settings.

## Public Access

The `public` attribute controls whether the bucket is publicly accessible:

- **`public = true`**: Bucket content is accessible via public URLs
- **`public = false`** (default): Bucket requires authentication for access

## CORS Configuration

The `cors` attribute allows you to configure Cross-Origin Resource Sharing rules for your bucket. Each CORS rule specifies:

- **`allowed_methods`**: HTTP methods allowed (GET, PUT, POST, DELETE, HEAD). See [Access-Control-Allow-Origin documentation](https://developer.mozilla.org/docs/Web/HTTP/Reference/Headers/Access-Control-Allow-Origin) for more info.
- **`allowed_origin`**: Origin domain allowed to make requests (use `*` for all origins). See [Access-Control-Allow-Methods documentation](https://developer.mozilla.org/docs/Web/HTTP/Reference/Headers/Access-Control-Allow-Methods) for more info.
- **`allowed_headers`**: Request headers that can be sent. See [Access-Control-Allow-Headers documentation](https://developer.mozilla.org/docs/Web/HTTP/Reference/Headers/Access-Control-Allow-Headers) for more info.
- **`expose_headers`**: Response headers that can be read by the client. See [Access-Control-Expose-Headers documentation](https://developer.mozilla.org/docs/Web/HTTP/Reference/Headers/Access-Control-Expose-Headers) for more info.
- **`max_age_seconds`**: How long the browser should cache the preflight response. See [Access-Control-Max-Age documentation](https://developer.mozilla.org/docs/Web/HTTP/Reference/Headers/Access-Control-Max-Age) for more info.

You can provide multiple CORS rules in a list. To disable CORS, set `cors` to an empty list `[]` or omit it.

## FTP/SFTP Access

The `ftp_sftp_enable` attribute controls FTP and SFTP access to the bucket:

- **`ftp_sftp_enable = true`** (default): FTP and SFTP access is enabled
- **`ftp_sftp_enable = false`**: FTP and SFTP access is disabled

When enabled, the `ftp` and `sftp` computed attributes contain connection credentials:
- `host`: Server hostname
- `port`: Server port
- `login`: Username for authentication (sensitive)
- `password`: Password for authentication (sensitive)
- `status`: Access status (ENABLED/DISABLED)

These credentials are automatically generated and can be used to connect to the bucket via FTP or SFTP clients. Note that `login` and `password` fields are marked as sensitive and will be hidden in Terraform output and logs. To access these values in outputs, use the `nonsensitive()` function.

## Custom Domain

The `domain` attribute allows you to configure a custom domain for bucket access (e.g., `static.example.com`). This is optional and can be left empty. When set, you'll need to configure DNS records to point your domain to the bucket endpoint.

## Example Usage
```terraform
# Create basic S3 bucket
resource "beget_s3_bucket" "main" {
  name        = "my-storage-bucket"
  description = "Basic S3 storage bucket"
  region      = "ru1"
}

output "bucket" {
  value = {
    id              = beget_s3_bucket.main.id
    name            = beget_s3_bucket.main.name
    region          = beget_s3_bucket.main.region
    public          = beget_s3_bucket.main.public
    url             = beget_s3_bucket.main.s3_access.url
    bucket_name     = beget_s3_bucket.main.s3_access.bucket_name
    access_key      = nonsensitive(beget_s3_bucket.main.s3_access.access_key)
    secret_key      = nonsensitive(beget_s3_bucket.main.s3_access.secret_key)
    ftp_sftp_enable = beget_s3_bucket.main.ftp_sftp_enable
  }
}
```
```terraform
# Create S3 bucket with CORS configuration and custom domain
resource "beget_s3_bucket" "web_storage" {
  name        = "web-assets-bucket"
  description = "S3 bucket for web assets with CORS and custom domain"
  region      = "ru1"
  public      = true
  domain      = "static.example.com"

  cors = [{
    allowed_methods = ["GET", "HEAD"]
    allowed_origin  = "https://example.com"
    allowed_headers = ["*"]
    expose_headers  = ["ETag", "Content-Length"]
    max_age_seconds = 3600
    }, {
    allowed_methods = ["GET", "PUT", "POST", "DELETE"]
    allowed_origin  = "*"
    allowed_headers = ["Authorization", "Content-Type"]
    expose_headers  = ["ETag"]
    max_age_seconds = 1800
  }]
}

output "bucket" {
  value = {
    id     = beget_s3_bucket.web_storage.id
    name   = beget_s3_bucket.web_storage.name
    domain = beget_s3_bucket.web_storage.domain
  }
}

output "s3_credentials" {
  value = {
    url         = beget_s3_bucket.web_storage.s3_access.url
    bucket_name = beget_s3_bucket.web_storage.s3_access.bucket_name
    access_key  = nonsensitive(beget_s3_bucket.web_storage.s3_access.access_key)
    secret_key  = nonsensitive(beget_s3_bucket.web_storage.s3_access.secret_key)
  }
}

output "ftp_credentials" {
  value = {
    host     = beget_s3_bucket.web_storage.ftp.host
    port     = beget_s3_bucket.web_storage.ftp.port
    login    = nonsensitive(beget_s3_bucket.web_storage.ftp.login)
    password = nonsensitive(beget_s3_bucket.web_storage.ftp.password)
    status   = beget_s3_bucket.web_storage.ftp.status
  }
}

output "sftp_credentials" {
  value = {
    host     = beget_s3_bucket.web_storage.sftp.host
    port     = beget_s3_bucket.web_storage.sftp.port
    login    = nonsensitive(beget_s3_bucket.web_storage.sftp.login)
    password = nonsensitive(beget_s3_bucket.web_storage.sftp.password)
    status   = beget_s3_bucket.web_storage.sftp.status
  }
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name for the S3 bucket service that will be displayed in Beget Control Panel
- `region` (String) Region where the S3 bucket is created. Currently only 'ru1' is available. Changing this field will recreate the bucket

### Optional

- `cors` (Attributes Set) Set of CORS rules. Can be empty to disable CORS (see [below for nested schema](#nestedatt--cors))
- `description` (String) Description of the S3 bucket service
- `domain` (String) Custom domain for bucket access (e.g., static.example.com). Can be empty
- `ftp_sftp_enable` (Boolean) Enable FTP/SFTP access to the bucket
- `public` (Boolean) Whether the bucket is publicly accessible

### Read-Only

- `ftp` (Attributes) FTP access credentials and connection details (see [below for nested schema](#nestedatt--ftp))
- `id` (String) S3 bucket resource identifier. Automatically assigned when the bucket is created
- `s3_access` (Attributes) S3 access credentials and connection endpoints (see [below for nested schema](#nestedatt--s3_access))
- `sftp` (Attributes) SFTP access credentials and connection details (see [below for nested schema](#nestedatt--sftp))

<a id="nestedatt--cors"></a>
### Nested Schema for `cors`

Required:

- `allowed_headers` (Set of String) Set of allowed request headers
- `allowed_methods` (Set of String) Set of allowed HTTP methods (GET, PUT, POST, DELETE, HEAD)
- `allowed_origin` (String) Allowed origin (e.g., https://example.com, *)
- `expose_headers` (Set of String) Set of exposed response headers
- `max_age_seconds` (Number) Time in seconds to cache preflight response


<a id="nestedatt--ftp"></a>
### Nested Schema for `ftp`

Read-Only:

- `host` (String) FTP server hostname
- `login` (String, Sensitive) FTP login username
- `password` (String, Sensitive) FTP password
- `port` (Number) FTP server port
- `status` (String) FTP access status (ENABLED/DISABLED)


<a id="nestedatt--s3_access"></a>
### Nested Schema for `s3_access`

Read-Only:

- `access_key` (String, Sensitive) S3 access key
- `bucket_name` (String) S3 bucket name
- `path_style_url` (String) Path-style S3 endpoint URL (e.g., https://s3.ru1.storage.beget.cloud/bucket-name)
- `secret_key` (String, Sensitive) S3 secret key
- `url` (String) S3 service URL (e.g., https://s3.ru1.storage.beget.cloud)
- `virtual_hosted_style_url` (String) Virtual-hosted-style S3 endpoint URL (e.g., https://bucket-name.s3.ru1.storage.beget.cloud)


<a id="nestedatt--sftp"></a>
### Nested Schema for `sftp`

Read-Only:

- `host` (String) SFTP server hostname
- `login` (String, Sensitive) SFTP login username
- `password` (String, Sensitive) SFTP password
- `port` (Number) SFTP server port
- `status` (String) SFTP access status (ENABLED/DISABLED)


